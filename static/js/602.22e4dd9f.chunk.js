"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[602],{602:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var n=t(43),i=t(722),l=t(250),s=t(579);const r=()=>{const[e,a]=(0,n.useState)(null),[t,r]=(0,n.useState)(!0),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[v,f]=(0,n.useState)(!1),x=(0,l.Zp)();(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return void x("/login");const t=await i.A.get("/api/auth/user",{headers:{Authorization:"Bearer ".concat(e)}});a(t.data),u(t.data.name),h(t.data.email),g(t.data.profilePicture),r(!1)}catch(n){var e,t;c((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Something went wrong"),r(!1),x("/login")}})()}),[x]);return t?(0,s.jsx)("div",{children:"Loading..."}):o?(0,s.jsx)("div",{className:"error-message",children:o}):(0,s.jsxs)("div",{className:"profile-container",children:[(0,s.jsx)("h2",{children:"Profile"}),(0,s.jsxs)("div",{className:"profile-picture",children:[(0,s.jsx)("img",{src:p||"https://via.placeholder.com/150",alt:"Profile"}),v&&(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{g(e.result)},e.readAsDataURL(a)}}})]}),v?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),t=await i.A.put("/api/auth/update-profile",{name:d,email:m,profilePicture:p},{headers:{Authorization:"Bearer ".concat(e)}});a(t.data),f(!1),c("")}catch(l){var t,n;c((null===(t=l.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong")}},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",value:d,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:m,onChange:e=>h(e.target.value)})]}),(0,s.jsx)("button",{type:"submit",children:"Save Changes"}),(0,s.jsx)("button",{type:"button",onClick:()=>f(!1),children:"Cancel"})]}):(0,s.jsxs)("div",{className:"profile-info",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",null===e||void 0===e?void 0:e.name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,s.jsx)("button",{onClick:()=>f(!0),children:"Edit Profile"})]})]})}}}]);
//# sourceMappingURL=602.22e4dd9f.chunk.js.map